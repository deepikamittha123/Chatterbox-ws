html
<!DOCTYPE html>
<html>
<head>
    <title>Chatterbox â€“ Milestone 4</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f6fb;
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }
        .container {
            width: 420px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h2 { text-align: center; }
        #chat {
            border: 1px solid #ddd;
            height: 300px;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
        }
        .system { color: gray; font-style: italic; }
        .me { color: #2c7be5; font-weight: bold; }
        #typing { font-size: 13px; color: green; }
        .controls {
            display: flex;
            gap: 5px;
        }
        input {
            flex: 1;
            padding: 6px;
        }
        button {
            padding: 6px 10px;
            background: #2c7be5;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        select { margin-bottom: 8px; width: 100%; padding: 6px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ðŸ’¬ Chatterbox</h2>

    <select id="room" onchange="switchRoom()">
        <option value="general">General</option>
        <option value="tech">Tech</option>
        <option value="fun">Fun</option>
    </select>

    <div id="chat"></div>
    <div id="typing"></div>

    <div class="controls">
        <input id="msg" placeholder="Type a message">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>

<script>
    const chat = document.getElementById("chat");
    const typingDiv = document.getElementById("typing");
    const msgInput = document.getElementById("msg");
    const roomSelect = document.getElementById("room");

    const username = prompt("Enter your name:");
    let currentRoom = roomSelect.value;

    const socket = new WebSocket("ws://localhost:8000/ws");

    socket.onopen = () => {
        socket.send(JSON.stringify({
            username: username,
            room: currentRoom
        }));
    };

    socket.onmessage = (event) => {
        const data = JSON.parse(event.data);

        if (data.type === "chat") {
            const prefix = data.username === username ? "me" : "";
            addMessage(`${data.username}: ${data.message}`, prefix);
        }

        if (data.type === "system") {
            addMessage(data.message, "system");
        }

        if (data.type === "typing") {
            typingDiv.innerText = `${data.username} is typing...`;
        }

        if (data.type === "stop_typing") {
            typingDiv.innerText = "";
        }
    };

    function addMessage(text, cls="") {
        const div = document.createElement("div");
        if (cls) div.classList.add(cls);
        div.innerText = text;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }

    function sendMessage() {
        if (!msgInput.value) return;
        socket.send(JSON.stringify({
            type: "chat",
            message: msgInput.value
        }));
        msgInput.value = "";
        socket.send(JSON.stringify({ type: "stop_typing" }));
    }

    function switchRoom() {
        chat.innerHTML = "";
        currentRoom = roomSelect.value;
        socket.send(JSON.stringify({
            type: "switch_room",
            room: currentRoom
        }));
    }

    msgInput.addEventListener("input", () => {
        socket.send(JSON.stringify({ type: "typing" }));
    });
</script>

</body>
</html>